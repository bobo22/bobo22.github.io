(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{157:function(n,s,a){"use strict";a.r(s);var t=a(0),e=Object(t.a)({},(function(){var n=this,s=n.$createElement,a=n._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h2",{attrs:{id:"简述函数节流和函数防抖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简述函数节流和函数防抖"}},[n._v("#")]),n._v(" 简述函数节流和函数防抖")]),n._v(" "),a("p",[n._v("首先，我们需要了解一些和这两个知识点相关的基础知识，首先我们以两个通俗的例子展示一下：我们知道目前的一种说法是当 1 秒内连续播放 24 张以上的图片时，在人眼的视觉中就会形成一个连贯的动画，所以在电影的播放（以前是，现在不知道）中基本是以每秒 24 张的速度播放的，为什么不 100 张或更多是因为 24 张就可以满足人类视觉需求的时候，100 张就会显得很浪费资源。再举个栗子，假设电梯一次只能载一人的话，10 个人要上楼的话电梯就得走 10 次，是一种浪费资源的行为；而实际生活正显然不是这样的，当电梯里有人准备上楼的时候如果外面又有人按电梯的话，电梯会再次打开直到满载位置，从电梯的角度来说，这时一种节约资源的行为")]),n._v(" "),a("ul",[a("li",[n._v("函数节流： 指定规定时间内只能执行一次函数")]),n._v(" "),a("li",[n._v("函数防抖：任务频繁触发的情况下，只有任务触发的间隔超过指定间隔的时候，任务才会执行。")])]),n._v(" "),a("p",[n._v('其实函数防抖可以这样子理解，比如我们打游戏放一个蓄力技能，你需要一直按着键盘某个键位，当你松开或者其他动作时，技能会被中断，只有你一直按到一定时间的时候，技能才会放出去。这个一直按住的时间就可以理解为上面说到的"'),a("font",{attrs:{color:"#F68736",face:"微软雅黑"}},[n._v("指定的时间间隔")]),n._v('"')],1),n._v(" "),a("p",[n._v("下面以实际例子讲一下函数防抖以及函数节流。")]),n._v(" "),a("h3",{attrs:{id:"函数节流-throttle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数节流-throttle"}},[n._v("#")]),n._v(" 函数节流(throttle)")]),n._v(" "),a("p",[n._v("这边我们以一个常用的点击按钮事件来解释一下。项目中进场会用到一个提交按钮，有时候可能会因为网络问题或者操作问题，用户可能同时点了两三次按钮，这时候我们后台数据就会多出很多数据，这时候我们就可以使用节流进行限制，让其在同一时间内只能提交一次。代码如下：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="X-UA-Compatible" content="ie=edge">\n    <title>函数节流与函数防抖</title>\n</head>\n<style>\n    .submit-btn {\n        width: 100px;\n        height: 100px;\n        background-color: red;\n    }\n</style>\n<body>\n    <div class="submit-btn" id="submit">\n\n    </div>\n</body>\n<script>\n    window.onload = function(){\n        document.getElementById(\'submit\').addEventListener(\'click\',function(){\n            console.log(1)\n        })\n    }\n<\/script>\n</html>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br")])]),a("p",[n._v("这一段很简单的代码可以看到,我点击按钮点击几次就会输出几次，如果这里面伴随着ajax操作，那门就会存在调用多次的情况，下面我们用一些节流的思路来控制一下。")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="X-UA-Compatible" content="ie=edge">\n    <title>函数节流与函数防抖</title>\n</head>\n<style>\n    .submit-btn {\n        width: 100px;\n        height: 100px;\n        background-color: red;\n    }\n</style>\n<body>\n    <div class="submit-btn" id="submit">\n\n    </div>\n</body>\n<script>\n    window.onload = function(){\n        // document.getElementById(\'submit\').addEventListener(\'click\',function(){\n        //     console.log(1)\n        // })\n\n        document.getElementById(\'submit\').addEventListener(\'click\',throttle(function(){\n            console.log(1)\n        }))\n    }\n\n    function throttle(fn, interval = 3000){\n        let canRun = true;\n        \n        return function(){\n            if(!canRun) return;\n\n            canRun = false;\n            setTimeout(() => {\n                fn.apply(this, arguments);\n                canRun = true;\n            }, interval);\n\n        }\n    }\n<\/script>\n</html>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br"),a("span",{staticClass:"line-number"},[n._v("46")]),a("br"),a("span",{staticClass:"line-number"},[n._v("47")]),a("br")])]),a("p",[n._v("这边我们定义了一个throttle函数用来控制click事件的回调function。我们通过使用闭包定义了一个canrun参数，可以把它理解为一个全局变量，函数执行的时候为false，只有为true的时候，才会执行函数。当函数执行完成后可以将这个参数重新变为true，如果你有ajax操作的话可以把这个变为true的参数放在ajax的成功会掉里面，这样子就可以避免重复点击。")]),n._v(" "),a("h3",{attrs:{id:"函数防抖-debounce"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数防抖-debounce"}},[n._v("#")]),n._v(" 函数防抖(debounce)")]),n._v(" "),a("p",[n._v("函数防抖上面已经解释过了，就是判断一段时间内还有没有后续操作，如果有的话就重新计算开始。下面以一段栗子解释一下。")]),n._v(" "),a("p",[n._v("我们以最常用的用户名验证来说明，之前我们验证某个用户名是否被注册，我们会使用鼠标移开事件监测，但现在我们一般会使用边输入边判断，这时候就需要我们使用防抖进行处理一下，如果用户一直在输入我们一直在请求很显然是不合理的。")]),n._v(" "),a("p",[n._v("先展示我们一般处理的代码")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<!DOCTYPE html>\n<html lang="en">\n\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="X-UA-Compatible" content="ie=edge">\n    <title>函数节流与函数防抖</title>\n    <script src="./jquery.js"><\/script>\n</head>\n<style>\n    .submit-btn {\n        width: 100px;\n        height: 100px;\n        background-color: red;\n    }\n</style>\n\n<body>\n\n    <input type="text" id="debounce">\n</body>\n<script>\n    window.onload = function () {\n\n        document.getElementById(\'debounce\').addEventListener(\'input\', function () {\n\n            var userName = this.value;\n\n            $.ajax({\n                url: \'./debounce.json\',\n                method: \'get\',\n                data: {},\n                success(data) {\n                    console.log(data);\n\n                    if(userName == data.usename) console.log(\'已经存在\');\n                },\n                error(error) {\n                    console.log(error);\n                },\n            });\n        })\n    }\n\n<\/script>\n\n</html>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br"),a("span",{staticClass:"line-number"},[n._v("46")]),a("br"),a("span",{staticClass:"line-number"},[n._v("47")]),a("br"),a("span",{staticClass:"line-number"},[n._v("48")]),a("br")])]),a("p",[n._v("效果图如下所示：\n"),a("img",{attrs:{src:"http://oyghxd9p6.bkt.clouddn.com/52850B37-3EAC-4006-92F6-0493452ED9BC.png",alt:""}})]),n._v(" "),a("p",[n._v("这边json我简单写了一个返回admin字段的json，每次我输入就会请求一次json文件，是非常耗性能的，这时候我们就需要使用防抖的功能。实现代码如下。")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<!DOCTYPE html>\n<html lang="en">\n\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="X-UA-Compatible" content="ie=edge">\n    <title>函数节流与函数防抖</title>\n    <script src="./jquery.js"><\/script>\n</head>\n<style>\n    .submit-btn {\n        width: 100px;\n        height: 100px;\n        background-color: red;\n    }\n</style>\n\n<body>\n\n    <input type="text" id="debounce">\n</body>\n<script>\n    window.onload = function () {\n\n        document.getElementById(\'debounce\').addEventListener(\'input\', debounce(function () {\n\n            var userName = this.value;\n\n            $.ajax({\n                url: \'./debounce.json\',\n                method: \'get\',\n                data: {},\n                success(data) {\n                    console.log(data);\n\n                    if (userName == data.usename) console.log(\'已经存在\');\n                },\n                error(error) {\n                    console.log(error);\n                },\n            });\n        }))\n    }\n\n    function debounce(fn, interval = 300) {\n        let timeout = null;\n\n        return function () {\n            clearTimeout(timeout);\n            timeout = setTimeout(() => {\n                fn.apply(this, arguments);\n            }, interval);\n        };\n    }\n<\/script>\n\n</html>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br"),a("span",{staticClass:"line-number"},[n._v("46")]),a("br"),a("span",{staticClass:"line-number"},[n._v("47")]),a("br"),a("span",{staticClass:"line-number"},[n._v("48")]),a("br"),a("span",{staticClass:"line-number"},[n._v("49")]),a("br"),a("span",{staticClass:"line-number"},[n._v("50")]),a("br"),a("span",{staticClass:"line-number"},[n._v("51")]),a("br"),a("span",{staticClass:"line-number"},[n._v("52")]),a("br"),a("span",{staticClass:"line-number"},[n._v("53")]),a("br"),a("span",{staticClass:"line-number"},[n._v("54")]),a("br"),a("span",{staticClass:"line-number"},[n._v("55")]),a("br"),a("span",{staticClass:"line-number"},[n._v("56")]),a("br"),a("span",{staticClass:"line-number"},[n._v("57")]),a("br"),a("span",{staticClass:"line-number"},[n._v("58")]),a("br")])]),a("p",[n._v("效果如下图所示：\n"),a("img",{attrs:{src:"http://oyghxd9p6.bkt.clouddn.com/BB6B32BD-88DA-47BD-81EB-AD0392CAC2BE.png",alt:""}})]),n._v(" "),a("p",[n._v("我们的debounce函数，其实就是每次改变的时候保存一个settimeout的值，每次变化则讲其变为null，同时重新进行一个定时器任务，根据时间间隔，比如我这边设置的是0.3秒,在0.3秒内还有输入的话，则这个json文件不请求。")])])}),[],!1,null,null,null);s.default=e.exports}}]);